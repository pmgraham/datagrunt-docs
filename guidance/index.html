<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <title>General Guidance - datagrunt</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "General Guidance";
        var mkdocs_page_input_path = "guidance.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href=".." class="icon icon-home"> datagrunt
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="..">Home</a>
                </li>
              </ul>
              <ul class="current">
                <li class="toctree-l1 current"><a class="reference internal current" href="#">General Guidance</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#overview">Overview</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#a-note-about-pandas">A Note About Pandas</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#a-note-about-spark">A Note About Spark</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#ideal-scenarios-for-datagrunt">Ideal Scenarios For Datagrunt</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#references">References</a>
    </li>
    </ul>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../examples/">Usage Examples</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../roadmap/">Roadmap</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../api/">API</a>
                </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="..">datagrunt</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".." class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">General Guidance</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h2 id="general-guidance">General Guidance</h2>
<h3 id="overview">Overview</h3>
<p>As you'll see in the API section of the documentation, there are four main classes to use for reading and writing CSV files:</p>
<ul>
<li>CSVReaderDuckDBEngine</li>
<li>CSVReaderPolarsEngine</li>
<li>CSVWriterDuckDBEngine</li>
<li>CSVWriterPolarsEngine</li>
</ul>
<p>The reason options exist with DuckDB and Polars is that generally speaking each of them perform a bit better than the other depending on the circumstances. For example, Polars is extremely efficient at reading CSVs up to a certain size. After a certain point with larger files DuckDB tends to perform better. During testing when Datagrunt was first created, CSV files smaller than 26 million records loaded into a Polars dataframe in under 4 seconds in most cases. DuckDB, reading the exact same file, could load the data in about three and a half seconds, but it took another second and a half to make the data accessible. At this scale you're only talking a couple of seconds but to some that might make a huge difference for their use case.</p>
<p>However, when it comes to converting CSV files to JSON, for example, DuckDB was not only faster than Polars on a 26 million record CSV file, it also wrote JSON that was very clean. When testing with Polars, there were occassions where the CSV file that was converted to JSON from a Polars dataframe wrote to an incorrectly formatted JSON file. DuckDB encountered no such issue and was consistently faster and had cleaner output on writes.</p>
<p>The other reason DuckDB is given as an option is that once the CSV file is impoted into the local database, you can then execute SQL queries against that data at tremendous speed. This same 26 million record dataset that's been referred to a couple of times imported the CSV file and executed an aggregate query in about four seconds or less on average. That kind of speed and power is not only powerful for analytics, it enables ETL at great speed with processing files.</p>
<p>Finally, you do not have to use any of the Datagrunt helpers if you wish to use other options. You may simply use Datagrunt to infer the CSV file delimiter, assign that delimiter to a variable, and then process your CSV files however you wish with whatever process or library you desire.</p>
<p>In conclusion, DuckDB and Polars are both presented as options in order to give the user the choice and the opportunity to use each engine in the use situation where you can get the best performance under the circumstances.</p>
<h3 id="a-note-about-pandas">A Note About Pandas</h3>
<p>Pandas is an amazing Python library and has served the community extremely well over the years. However, as you can see from the <a href="https://pola.rs">Polars</a> website, Polars is exponentially faster than Pandas in many (if not most) use cases. Therefore, the decision was made to use Polars for dataframes in Datagrunt.</p>
<h3 id="a-note-about-spark">A Note About Spark</h3>
<p>Like Pandas, Spark has served the community well. However, it is the opinion of the Datagrunt team that the combination of DuckDB and Polars presents an opportunity to reduce our dependence on the Spark ecosystem for batch processing. Again, as you can see on the <a href="https://pola.rs">Polars</a> website, Polars is significantly faster than Spark for data processing in many situations. Not only is Polars less complex to use than Spark, but Polars is incredibly efficient and fast when using machines with smaller compute footprints.</p>
<h3 id="ideal-scenarios-for-datagrunt">Ideal Scenarios For Datagrunt</h3>
<p>Datagrunt is ideally utilized during exploratory data analysis, data engineering pipelines, or data science workloads that depend on CSV files. With the very small compute footprint required from both DuckDB and Polars, building pipelines in serverless microservices (such as Google's Cloud Run Functions) is easy, efficent, cost effective, and relatively simple to build and maintain.</p>
<h3 id="references">References</h3>
<p>Kaggle's <a href="https://www.kaggle.com/datasets/rounakbanik/the-movies-dataset?select=ratings.csv">The Movies Dataset</a> that was used in testing. Specifically, we used the <code>ratings.csv</code> file in most tests.</p>
<p>Tests were conducted on a base model <a href="https://www.apple.com/macbook-air/specs/">13 inch 2024 MacBook Air M3</a>.</p>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href=".." class="btn btn-neutral float-left" title="Home"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../examples/" class="btn btn-neutral float-right" title="Usage Examples">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href=".." style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../examples/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
